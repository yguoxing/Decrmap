let stationData = [{"name":"1号线","points":[{"name":"苹果园","coordinate":[116.18533464205812,39.74142793391201]},{"name":"古城","coordinate":[116.19833613882824,39.72247368137462]},{"name":"八角游乐园","coordinate":[116.22065460239914,39.72213608811748]},{"name":"八宝山","coordinate":[116.24354187920795,39.72224498043337]},{"name":"玉泉路","coordinate":[116.26073491509378,39.72256060135214]},{"name":"五棵松","coordinate":[116.28168820892738,39.722892181405]},{"name":"万寿路","coordinate":[116.3028154166,39.72276933321959]},{"name":"公主坟","coordinate":[116.31783911090619,39.722562535976806]},{"name":"军事博物馆","coordinate":[116.32954317091148,39.72250532633939]},{"name":"木樨地","coordinate":[116.34536250306482,39.72218535223857]},{"name":"南礼士路","coordinate":[116.3604869883459,39.72203928712628]},{"name":"复兴门","coordinate":[116.36440993119163,39.72208026001067]},{"name":"西单","coordinate":[116.38184164944845,39.72236865868007]},{"name":"天安门西","coordinate":[116.39931666650196,39.722835248414896]},{"name":"天安门东","coordinate":[116.40911737608322,39.723139051702844]},{"name":"王府井","coordinate":[116.4190628940883,39.723456948593196]},{"name":"东单","coordinate":[116.42726882454568,39.72356190053756]},{"name":"建国门","coordinate":[116.44357621139287,39.72356411150503]},{"name":"永安里","coordinate":[116.45835655208862,39.723281521648914]},{"name":"国贸","coordinate":[116.46794633724117,39.72319094064554]},{"name":"大望路","coordinate":[116.48571977463207,39.72377145848438]},{"name":"四惠","coordinate":[116.50318679667954,39.72395185883124]},{"name":"四惠东","coordinate":[116.5236634444234,39.72405618819212]}],"style":{"color":"#CC3366"},"id":"index0"},{"name":"2号线","points":[{"name":"西直门","coordinate":[116.36337956356077,39.75504731535233]},{"name":"积水潭","coordinate":[116.38045132688322,39.76377478288927]},{"name":"鼓楼大街","coordinate":[116.40154466806963,39.76309744432103]},{"name":"安定门","coordinate":[116.4158634543724,39.764449905138804]},{"name":"雍和宫","coordinate":[116.42450758302535,39.76458151764459]},{"name":"东直门","coordinate":[116.44155697829724,39.756338540064974]},{"name":"东四十条","coordinate":[116.44190507546983,39.74886875635957]},{"name":"朝阳门","coordinate":[116.44146768575801,39.73949242999478]},{"name":"建国门","coordinate":[116.44357621139287,39.72356411150503]},{"name":"北京站","coordinate":[116.43487459056173,39.72018912529066]},{"name":"崇文门","coordinate":[116.42514871064363,39.71643896991736]},{"name":"前门","coordinate":[116.40554253041007,39.715602027194905]},{"name":"和平门","coordinate":[116.3918854431456,39.71543038081754]},{"name":"宣武门","coordinate":[116.38211419830564,39.714949782508796]},{"name":"长椿街","coordinate":[116.37117729955303,39.71440940772962]},{"name":"复兴门","coordinate":[116.36440993119163,39.72208026001067]},{"name":"阜成门","coordinate":[116.36408303425974,39.73856223593154]},{"name":"车公庄","coordinate":[116.36248609917916,39.74722382821503]}],"style":{"color":"#CC9999"},"id":"index1"},{"name":"4号线大兴线","points":[{"name":"安河桥北","coordinate":[116.27769726361463,39.82759049937434]},{"name":"北宫门","coordinate":[116.28525479009991,39.81762316239627]},{"name":"西苑","coordinate":[116.30029752869014,39.813687519356534]},{"name":"圆明园","coordinate":[116.31720337317962,39.81441535223189]},{"name":"北京大学东门","coordinate":[116.32353110604096,39.8069642231564]},{"name":"中关村","coordinate":[116.32433177445371,39.79892343453872]},{"name":"海淀黄庄","coordinate":[116.32561411952179,39.79084249933078]},{"name":"人民大学","coordinate":[116.32935596200625,39.781757828529294]},{"name":"魏公村","coordinate":[116.33113947717136,39.77245619693409]},{"name":"国家图书馆","coordinate":[116.33316266285425,39.75788132054433]},{"name":"动物园","coordinate":[116.34647021564166,39.75294533731412]},{"name":"西直门","coordinate":[116.36337956356077,39.75504731535233]},{"name":"新街口","coordinate":[116.37539830341005,39.755600009729875]},{"name":"平安里","coordinate":[116.38058454703986,39.748778554314015]},{"name":"西四","coordinate":[116.38119656924292,39.739075343195026]},{"name":"灵境胡同","coordinate":[116.3814895996886,39.73118482604795]},{"name":"西单","coordinate":[116.38184164944845,39.72236865868007]},{"name":"宣武门","coordinate":[116.38211419830564,39.714949782508796]},{"name":"菜市口","coordinate":[116.3822395132878,39.704467622260125]},{"name":"陶然亭","coordinate":[116.38216782772813,39.69372002885518]},{"name":"北京南站","coordinate":[116.38643608296908,39.680076016983435]},{"name":"马家堡","coordinate":[116.3791445476394,39.668324752241034]},{"name":"角门西","coordinate":[116.37890981785567,39.66106382549651]},{"name":"公益西桥","coordinate":[116.37858004631487,39.6522016259498]},{"name":"新宫","coordinate":[116.37336325996539,39.62747827334502]},{"name":"西红门","coordinate":[116.33643513560276,39.60464963995656]},{"name":"高米店北","coordinate":[116.33859729066012,39.58877140928436]},{"name":"高米店南","coordinate":[116.33967589782175,39.57829571970478]},{"name":"枣园","coordinate":[116.34024039914628,39.568328390936074]},{"name":"清源路","coordinate":[116.34028459625826,39.557616971848574]},{"name":"黄村西大街","coordinate":[116.34039374156531,39.54665681394397]},{"name":"黄村火车站","coordinate":[116.34074830660792,39.53761390154841]},{"name":"义和庄","coordinate":[116.3268039381156,39.52759693528526]},{"name":"生物医药基地","coordinate":[116.32959500370336,39.50163993920478]},{"name":"天宫院","coordinate":[116.32770252289428,39.48547563276492]}],"style":{"color":"#669966"},"id":"index2"},{"name":"5号线","points":[{"name":"天通苑北","coordinate":[116.42065192399437,39.89844638188745]},{"name":"天通苑","coordinate":[116.4204993002276,39.89033717560943]},{"name":"天通苑南","coordinate":[116.4203800937894,39.88162128866372]},{"name":"立水桥","coordinate":[116.4200553528142,39.8681998852347]},{"name":"立水桥南","coordinate":[116.42224023524822,39.857041672277944]},{"name":"北苑路北","coordinate":[116.4257913653979,39.84573315225245]},{"name":"大屯路东","coordinate":[116.42650813116308,39.8180597828422]},{"name":"惠新西街北口","coordinate":[116.42479881684045,39.80311402902635]},{"name":"惠新西街南口","coordinate":[116.42530708362821,39.79225163584127]},{"name":"和平西桥","coordinate":[116.4257293816433,39.783488291762325]},{"name":"和平里北街","coordinate":[116.42631732899672,39.77374951171268]},{"name":"雍和宫","coordinate":[116.42450758302535,39.76458151764459]},{"name":"北新桥","coordinate":[116.42456480570894,39.75613101480761]},{"name":"张自忠路","coordinate":[116.42483986984895,39.74894169146472]},{"name":"东四","coordinate":[116.42414142971556,39.73957421684199]},{"name":"灯市口","coordinate":[116.42543563254539,39.73265038170152]},{"name":"东单","coordinate":[116.42726882454568,39.72356190053756]},{"name":"崇文门","coordinate":[116.42514871064363,39.71643896991736]},{"name":"磁器口","coordinate":[116.42800032268154,39.70840992677475]},{"name":"天坛东门","coordinate":[116.42865842845868,39.697587055018175]},{"name":"蒲黄榆","coordinate":[116.43087061967735,39.68078929237916]},{"name":"刘家窑","coordinate":[116.42983162821973,39.672817154990355]},{"name":"宋家庄","coordinate":[116.43618101047943,39.66107551274402]}],"style":{"color":"#00CC99"},"id":"index3"},{"name":"6号线","points":[{"name":"海淀五路居","coordinate":[116.28400092162634,39.747629331238386]},{"name":"慈寿寺","coordinate":[116.30135960685057,39.74812033826234]},{"name":"花园桥","coordinate":[116.31882447294136,39.74741162662454]},{"name":"白石桥南","coordinate":[116.33353169077297,39.747657304021175]},{"name":"车公庄西","coordinate":[116.35191023333923,39.74710426963756]},{"name":"车公庄","coordinate":[116.36248609917916,39.74722382821503]},{"name":"平安里","coordinate":[116.38058454703986,39.748778554314015]},{"name":"北海北","coordinate":[116.39415674350998,39.74852127753982]},{"name":"南锣鼓巷","coordinate":[116.41116724173004,39.74914288420965]},{"name":"东四","coordinate":[116.42414142971556,39.73957421684199]},{"name":"朝阳门","coordinate":[116.44146768575801,39.73949242999478]},{"name":"东大桥","coordinate":[116.45951933139239,39.73766587783604]},{"name":"呼家楼","coordinate":[116.46950410577539,39.73802190802513]},{"name":"金台路","coordinate":[116.48598971837495,39.73845143520779]},{"name":"十里堡","coordinate":[116.50974638471573,39.738278947691725]},{"name":"青年路","coordinate":[116.52509661662768,39.738509667779965]},{"name":"褡裢坡","coordinate":[116.57149172644355,39.73886541730059]},{"name":"黄渠","coordinate":[116.58618564920894,39.738976217358754]},{"name":"常营","coordinate":[116.60671529755457,39.74054750050439]},{"name":"草房","coordinate":[116.62381508831392,39.73971147208454]},{"name":"物资学院路","coordinate":[116.64681249857654,39.742122754124296]},{"name":"通州北关","coordinate":[116.669322482966,39.733733466305296]},{"name":"北运河西","coordinate":[116.69570142145265,39.71799466688117]},{"name":"郝家府","coordinate":[116.72548488503456,39.718350936862805]},{"name":"东夏园","coordinate":[116.74216597103997,39.7185578849307]},{"name":"潞城","coordinate":[116.75606973568146,39.71795514263482]}],"style":{"color":"#E5A233"},"id":"index4"},{"name":"7号线","points":[{"name":"北京西站","coordinate":[116.32910721850409,39.709750676400716]},{"name":"湾子","coordinate":[116.33566581839344,39.704982434610656]},{"name":"达官营","coordinate":[116.34333527496312,39.704752155215374]},{"name":"广安门内","coordinate":[116.3658917022528,39.704511231832214]},{"name":"菜市口","coordinate":[116.3822395132878,39.704467622260125]},{"name":"虎坊桥","coordinate":[116.39192074693626,39.70477254312803]},{"name":"珠市口","coordinate":[116.40458887890446,39.706648136210475]},{"name":"桥湾","coordinate":[116.41616771375912,39.7080785535278]},{"name":"磁器口","coordinate":[116.42800032268154,39.70840992677475]},{"name":"广渠门内","coordinate":[116.4422100535088,39.708692301136495]},{"name":"广渠门外","coordinate":[116.45717859125654,39.7083854625686]},{"name":"九龙山","coordinate":[116.48530610044374,39.70910494157249]},{"name":"大郊亭","coordinate":[116.49597808601908,39.70814856014613]},{"name":"百子湾","coordinate":[116.50508799114685,39.708011794929206]},{"name":"化工","coordinate":[116.51135921997682,39.702306391332485]},{"name":"南楼梓庄","coordinate":[116.50891661088777,39.689904907407225]},{"name":"欢乐谷景区","coordinate":[116.50719507947728,39.682024664893305]},{"name":"双合","coordinate":[116.53397969714624,39.67576869195395]},{"name":"焦化厂","coordinate":[116.54597067905323,39.670275322049974]}],"style":{"color":"#29ADC8"},"id":"index5"},{"name":"8号线","points":[{"name":"朱辛庄","coordinate":[116.32140030218703,39.91916071944431]},{"name":"育知路","coordinate":[116.33516392964421,39.902554618622474]},{"name":"平西府","coordinate":[116.35851338966668,39.904634313961935]},{"name":"回龙观东大街","coordinate":[116.37101892656842,39.89581755453142]},{"name":"霍营","coordinate":[116.36788182993322,39.886691479846604]},{"name":"育新","coordinate":[116.35526328496874,39.87500171027986]},{"name":"西小口","coordinate":[116.35947898876557,39.86160948921514]},{"name":"永泰庄","coordinate":[116.36242555272902,39.85259561639225]},{"name":"林萃桥","coordinate":[116.38017123217763,39.83691709590602]},{"name":"森林公园南门","coordinate":[116.4003026573578,39.825147301253764]},{"name":"奥林匹克公园","coordinate":[116.39939868268739,39.81745639307729]},{"name":"奥体中心","coordinate":[116.40145726199248,39.80140704133984]},{"name":"北土城","coordinate":[116.40192986566346,39.79223079063274]},{"name":"安华桥","coordinate":[116.40186940904483,39.78386327610329]},{"name":"安德里北街","coordinate":[116.40215058172878,39.772929559038175]},{"name":"鼓楼大街","coordinate":[116.40154466806963,39.76309744432103]},{"name":"什刹海","coordinate":[116.40381381247732,39.753176837052905]},{"name":"南锣鼓巷","coordinate":[116.41116724173004,39.74914288420965]}],"style":{"color":"#C27F2A"},"id":"index6"},{"name":"9号线","points":[{"name":"郭公庄","coordinate":[116.30983260644189,39.629936926865895]},{"name":"丰台科技园","coordinate":[116.30490453862475,39.640609082769146]},{"name":"科怡路","coordinate":[116.30507369139275,39.64781440256769]},{"name":"丰台南路","coordinate":[116.3041193212349,39.656341531695574]},{"name":"丰台东大街","coordinate":[116.30148087941392,39.67056317665552]},{"name":"七里庄","coordinate":[116.30159137219387,39.68170194505498]},{"name":"六里桥","coordinate":[116.31087555048676,39.69552016595571]},{"name":"六里桥东","coordinate":[116.32272864099765,39.70186454393635]},{"name":"北京西站","coordinate":[116.32910721850409,39.709750676400716]},{"name":"军事博物馆","coordinate":[116.32954317091148,39.72250532633939]},{"name":"白堆子","coordinate":[116.33362493589946,39.738747156692824]},{"name":"白石桥南","coordinate":[116.33353169077297,39.747657304021175]},{"name":"国家图书馆","coordinate":[116.33316266285425,39.75788132054433]}],"style":{"color":"#D36FB1"},"id":"index7"},{"name":"10号线","points":[{"name":"丰台站","coordinate":[116.31274036318507,39.66515541697464]},{"name":"泥洼","coordinate":[116.31207830482067,39.673819245245994]},{"name":"西局","coordinate":[116.31115816047514,39.681630736318596]},{"name":"六里桥","coordinate":[116.31087555048676,39.69552016595571]},{"name":"莲花桥","coordinate":[116.31808857306062,39.71315194890579]},{"name":"公主坟","coordinate":[116.31783911090619,39.722562535976806]},{"name":"西钓鱼台","coordinate":[116.30545170246431,39.73871054559905]},{"name":"慈寿寺","coordinate":[116.30135960685057,39.74812033826234]},{"name":"车道沟","coordinate":[116.30153989872808,39.76390460132589]},{"name":"长春桥","coordinate":[116.30172674830717,39.77387385700044]},{"name":"火器营","coordinate":[116.29687503728918,39.781371787151414]},{"name":"巴沟","coordinate":[116.30177534716405,39.7893678275976]},{"name":"苏州街","coordinate":[116.31403348803656,39.790681601231825]},{"name":"海淀黄庄","coordinate":[116.32561411952179,39.79084249933078]},{"name":"知春里","coordinate":[116.33735671725275,39.791037978625496]},{"name":"知春路","coordinate":[116.34986180499685,39.79103963522732]},{"name":"西土城","coordinate":[116.36174983997229,39.791003189978085]},{"name":"牡丹园","coordinate":[116.37771209408736,39.791347762471844]},{"name":"健德门","coordinate":[116.38908242996457,39.79180912245914]},{"name":"北土城","coordinate":[116.40192986566346,39.79223079063274]},{"name":"安贞门","coordinate":[116.41363760876138,39.79229760571587]},{"name":"惠新西街南口","coordinate":[116.42530708362821,39.79225163584127]},{"name":"芍药居","coordinate":[116.4455419048976,39.79204380468846]},{"name":"太阳宫","coordinate":[116.45532608547764,39.78734855837459]},{"name":"三元桥","coordinate":[116.46498315444498,39.77633482565284]},{"name":"亮马桥","coordinate":[116.47001021660644,39.76401549922204]},{"name":"农业展览馆","coordinate":[116.47003977117929,39.75600684465414]},{"name":"团结湖","coordinate":[116.46960417809802,39.74841035469325]},{"name":"呼家楼","coordinate":[116.46950410577539,39.73802190802513]},{"name":"金台夕照","coordinate":[116.4695491113711,39.732009075403965]},{"name":"国贸","coordinate":[116.46794633724117,39.72319094064554]},{"name":"双井","coordinate":[116.46972042009578,39.708263141407684]},{"name":"劲松","coordinate":[116.46927764049225,39.69911497729197]},{"name":"潘家园","coordinate":[116.46900868489617,39.69083361497752]},{"name":"十里河","coordinate":[116.4658688034836,39.68095867432666]},{"name":"分钟寺","coordinate":[116.4616156399394,39.66701348532487]},{"name":"成寿寺","coordinate":[116.4555823748282,39.66059246125212]},{"name":"宋家庄","coordinate":[116.43618101047943,39.66107551274402]},{"name":"石榴庄","coordinate":[116.42183240010924,39.66124314499942]},{"name":"大红门","coordinate":[116.40618266988155,39.66093782439509]},{"name":"角门东","coordinate":[116.3940170554833,39.66062185245582]},{"name":"角门西","coordinate":[116.37890981785567,39.66106382549651]},{"name":"草桥","coordinate":[116.36050711060825,39.66073167171342]},{"name":"纪家庙","coordinate":[116.34079870209537,39.65926099203756]},{"name":"首经贸","coordinate":[116.32787886218456,39.65945642978363]}],"style":{"color":"#FF3703"},"id":"index8"},{"name":"13号线","points":[{"name":"西直门","coordinate":[116.36337956356077,39.75504731535233]},{"name":"大钟寺","coordinate":[116.35308639754074,39.78102274644482]},{"name":"知春路","coordinate":[116.34986180499685,39.79103963522732]},{"name":"五道口","coordinate":[116.345699820454,39.80752547182192]},{"name":"上地","coordinate":[116.32810209353268,39.84760890816261]},{"name":"西二旗","coordinate":[116.31384340452243,39.86779426537001]},{"name":"龙泽","coordinate":[116.32743895718994,39.88551230129167]},{"name":"回龙观","coordinate":[116.34358626425353,39.88529089717602]},{"name":"霍营","coordinate":[116.36788182993322,39.886691479846604]},{"name":"立水桥","coordinate":[116.4200553528142,39.8681998852347]},{"name":"北苑","coordinate":[116.44258150687878,39.85776973544725]},{"name":"望京西","coordinate":[116.4586971034128,39.81075534019618]},{"name":"芍药居","coordinate":[116.4455419048976,39.79204380468846]},{"name":"光熙门","coordinate":[116.43962191734371,39.78346019546743]},{"name":"柳芳","coordinate":[116.4405324497157,39.77310416917916]},{"name":"东直门","coordinate":[116.44155697829724,39.756338540064974]}],"style":{"color":"#993366"},"id":"index9"},{"name":"14号线西段","points":[{"name":"西局","coordinate":[116.31115816047514,39.681630736318596]},{"name":"七里庄","coordinate":[116.30159137219387,39.68170194505498]},{"name":"大井","coordinate":[116.28309083841201,39.680681302528825]},{"name":"郭庄子","coordinate":[116.26109999042522,39.67986632630482]},{"name":"大瓦窑","coordinate":[116.2482179695879,39.67433345648155]},{"name":"园博园","coordinate":[116.20962877043338,39.67621540792189]},{"name":"张郭庄","coordinate":[116.19467029381683,39.67322129787965]}],"style":{"color":"#BC8081"},"id":"index10"},{"name":"14号线东段","points":[{"name":"善各庄","coordinate":[116.4860296934051,39.84200652422061]},{"name":"来广营","coordinate":[116.4747565552416,39.835069330071775]},{"name":"东湖渠","coordinate":[116.4752990478417,39.825164341988796]},{"name":"望京","coordinate":[116.47729276878326,39.813205053271105]},{"name":"阜通","coordinate":[116.47890955663162,39.80684469930276]},{"name":"望京南","coordinate":[116.48972149972823,39.799501105771895]},{"name":"将台","coordinate":[116.49752067302497,39.78594311808985]},{"name":"东风北桥","coordinate":[116.49384611435526,39.77349771354304]},{"name":"枣营","coordinate":[116.48257585080071,39.759190861297355]},{"name":"朝阳公园","coordinate":[116.48621330904916,39.74847147969615]},{"name":"金台路","coordinate":[116.48598971837495,39.73845143520779]},{"name":"大望路","coordinate":[116.48571977463207,39.72377145848438]},{"name":"九龙山","coordinate":[116.48530610044374,39.70910494157249]},{"name":"平乐园","coordinate":[116.48530610044374,39.70910494157249]},{"name":"北工大西门","coordinate":[116.48528481037148,39.68984621902871]},{"name":"十里河","coordinate":[116.4658688034836,39.68095867432666]},{"name":"方庄","coordinate":[116.44746322162727,39.68085960322168]},{"name":"蒲黄榆","coordinate":[116.43087061967735,39.68078929237916]},{"name":"景泰","coordinate":[116.41843101911746,39.68055333226354]},{"name":"永定门外","coordinate":[116.40691416801741,39.682801453932825]},{"name":"北京南站","coordinate":[116.38643608296908,39.680076016983435]}],"style":{"color":"#B298BA"},"id":"index11"},{"name":"15号线","points":[{"name":"清华东路西口","coordinate":[116.34679315998629,39.81524826566476]},{"name":"六道口","coordinate":[116.36057484358066,39.81566571910136]},{"name":"北沙滩","coordinate":[116.37682752302709,39.816485162473725]},{"name":"奥林匹克公园","coordinate":[116.39939868268739,39.81745639307729]},{"name":"安立路","coordinate":[116.41555137964268,39.81789101363714]},{"name":"大屯路东","coordinate":[116.42650813116308,39.8180597828422]},{"name":"关庄","coordinate":[116.4391557815428,39.816082825002724]},{"name":"望京西","coordinate":[116.4586971034128,39.81075534019618]},{"name":"望京","coordinate":[116.47729276878326,39.813205053271105]},{"name":"望京东","coordinate":[116.49456719203383,39.81821475207428]},{"name":"崔各庄","coordinate":[116.50041261941911,39.8373587671436]},{"name":"马泉营","coordinate":[116.51090557075834,39.84875535829286]},{"name":"孙河","coordinate":[116.54230842730296,39.86015847039022]},{"name":"国展","coordinate":[116.56298917227936,39.88479769832705]},{"name":"花梨坎","coordinate":[116.56549124984022,39.89916111823996]},{"name":"后沙峪","coordinate":[116.57206125833369,39.9286793278921]},{"name":"南法信","coordinate":[116.61768022374407,39.94325559320987]},{"name":"石门","coordinate":[116.64876840044465,39.94510905396058]},{"name":"顺义","coordinate":[116.66474754288703,39.944933641258444]},{"name":"俸伯","coordinate":[116.692719463867,39.947096964284384]}],"style":{"color":"#9966CC"},"id":"index12"},{"name":"16号线","points":[{"name":"北安河","coordinate":[116.13808846834209,39.88273160119178]},{"name":"温阳路","coordinate":[116.16939439666756,39.883586640567216]},{"name":"稻香湖路","coordinate":[116.19596737125555,39.88322736540485]},{"name":"屯佃","coordinate":[116.22350944837208,39.88259407975511]},{"name":"永丰","coordinate":[116.24603057187107,39.88650826631803]},{"name":"永丰南","coordinate":[116.25587592772197,39.88054011774611]},{"name":"西北旺","coordinate":[116.26534336233281,39.86418756981536]},{"name":"马连洼","coordinate":[116.28052578894972,39.84767863505732]},{"name":"农大南路","coordinate":[116.28052578894972,39.84767863505732]},{"name":"西苑","coordinate":[116.30029752869014,39.813687519356534]}],"style":{"color":"#B58F68"},"id":"index13"},{"name":"八通线","points":[{"name":"四惠","coordinate":[116.50318679667954,39.72395185883124]},{"name":"四惠东","coordinate":[116.5236634444234,39.72405618819212]},{"name":"高碑店","coordinate":[116.53926816905536,39.724854820766126]},{"name":"传媒大学","coordinate":[116.56264323106343,39.72425448263502]},{"name":"双桥","coordinate":[116.58460093121624,39.724941599559514]},{"name":"管庄","coordinate":[116.6070508183132,39.723964779098395]},{"name":"八里桥","coordinate":[116.62640960251751,39.721279176976054]},{"name":"通州北苑","coordinate":[116.6448795935797,39.71912731712712]},{"name":"果园","coordinate":[116.65431280237823,39.70873611536123]},{"name":"九棵树","coordinate":[116.66516768494543,39.705504568868065]},{"name":"梨园","coordinate":[116.67648798466132,39.698804778492075]},{"name":"临河里","coordinate":[116.68673695356938,39.69033749935792]},{"name":"土桥","coordinate":[116.69425019311116,39.68673220709229]}],"style":{"color":"#599fdc"},"id":"index14"},{"name":"昌平线","points":[{"name":"西二旗","coordinate":[116.31384340452243,39.86779426537001]},{"name":"生命科学园","coordinate":[116.30181496286806,39.90981139856018]},{"name":"朱辛庄","coordinate":[116.32140030218703,39.91916071944431]},{"name":"巩华城","coordinate":[116.30169908019641,39.94611248586139]},{"name":"沙河","coordinate":[116.2963231123786,39.96346684275983]},{"name":"沙河高教园","coordinate":[116.2880224994903,39.979766927396696]},{"name":"南邵","coordinate":[116.29477010491541,40.02213638320396]},{"name":"北邵洼","coordinate":[116.28924043535251,40.03680414639922]},{"name":"昌平东关","coordinate":[116.26979837732135,40.03663639704652]},{"name":"昌平","coordinate":[116.24135304418667,40.03504251688631]},{"name":"十三陵景区","coordinate":[116.2156102027527,40.054411887692964]},{"name":"昌平西山口","coordinate":[116.20349031260241,40.05895911484038]}],"style":{"color":"#a6e038"},"id":"index15"},{"name":"亦庄线","points":[{"name":"宋家庄","coordinate":[116.43618101047943,39.66107551274402]},{"name":"肖村","coordinate":[116.45629087609278,39.64907484998375]},{"name":"小红门","coordinate":[116.46707479175254,39.64314702641403]},{"name":"旧宫","coordinate":[116.46869876612314,39.621725806407454]},{"name":"亦庄桥","coordinate":[116.4881180967776,39.618013689870736]},{"name":"亦庄文化园","coordinate":[116.49827741382029,39.622021612967075]},{"name":"万源街","coordinate":[116.51319591540674,39.61843856659627]},{"name":"荣京东街","coordinate":[116.5210119770308,39.60881460770872]},{"name":"荣昌东街","coordinate":[116.52930612204906,39.59840542176249]},{"name":"同济南路","coordinate":[116.54765124728677,39.588371480269586]},{"name":"经海路","coordinate":[116.57018063528638,39.598704788861]},{"name":"次渠南","coordinate":[116.5892024614276,39.61000143819243]},{"name":"次渠","coordinate":[116.59918004928832,39.618378156758354]}],"style":{"color":"#d8dc1d"},"id":"index16"},{"name":"房山线","points":[{"name":"郭公庄","coordinate":[116.30983260644189,39.629936926865895]},{"name":"大葆台","coordinate":[116.29942526454926,39.62329332458995]},{"name":"稻田","coordinate":[116.22669370655969,39.60970682598091]},{"name":"长阳","coordinate":[116.22052713146033,39.578647309723976]},{"name":"篱笆房","coordinate":[116.19719276313462,39.575936461614305]},{"name":"广阳城","coordinate":[116.19265959471637,39.56327136958819]},{"name":"良乡大学城北","coordinate":[116.1911256315372,39.545386673781735]},{"name":"良乡大学城","coordinate":[116.18413584031147,39.53878560212931]},{"name":"良乡大学城西","coordinate":[116.16394827042603,39.53888640084733]},{"name":"良乡南关","coordinate":[116.148518807106,39.538756089899636]},{"name":"苏庄","coordinate":[116.13316174799787,39.53848327437473]}],"style":{"color":"#c91ddc"},"id":"index17"},{"name":"机场线","points":[{"name":"东直门","coordinate":[116.44155697829724,39.756338540064974]},{"name":"三元桥","coordinate":[116.46498315444498,39.77633482565284]},{"name":"T3航站楼","coordinate":[116.6229114729696,39.86777323622783]},{"name":"T2航站楼","coordinate":[116.60083205109582,39.89434789244214]},{"name":"三元桥","coordinate":[116.46498315444498,39.77633482565284]}],"style":{"color":"#1ddccc"},"id":"index18"}];


var mapId = 'mapBox';

const constData = {
    maptype: ''
}

window.onload = function(){
    collapsed();
    let status = false;
    $("#switchButton").click(function(){
        let width = status ? 0 : 400;
        let left = status ? 12 : 412;
        status = !status;
        $(".menuOuter").animate({
            width: width
        }, 600 );

        $("#switchButton").animate({
            left: left
        }, 600 );
    });
    

    // initOSMMap();
    // initBaiduMap();
    initGaodeMap();
    // initGoogleMap();
    /* addCirclePoint();
    addPolygon();
    addMarkerPoint();
    addLine(); */
}

function collapsed(defaultShow){
    $('.menu h3').click(function(){
        if(!$(this).next().hasClass('collapsed_open')){
            let self = this;
            $(".menu .collapsed_open").stop();
            $(".menu .collapsed_open").animate({
                height: '0'
            }, 600 );

            let showSpan = $(this).next('div');
            let outerHeight = $('.menuOuter').height();
            let h3Height = $('.menu h3').height();
            let childrenHeight = $('.menu h3').length * h3Height;
            showSpan.animate({
                height: (outerHeight - childrenHeight - 10) + 'px'
            }, 600);

            $(".menu div").removeClass('collapsed_open');
            $(self).next('div').addClass('collapsed_open');
        }
    })
}

function getCurrentPos(){
    if(navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
            function (position) {
                console.log( position.coords.longitude );
                console.log( position.coords.latitude );
            },
            function (e) {
               throw(e.message);
            }
        )
    }
}

function initOSMMap(){
    DMap.Map.addOsmMap(mapId, {
        defaultCenter: [116,40], 
        ctrls:[{type: 'ZOOM'}, {type: 'SCALELINE'}, {type: 'OVERVIEWMAP', collapsed: false}, {type: 'MOUSEPOSITION'}]
    });
}

function initBaiduMap(){
    DMap.Map.addBaiduMap(mapId, {
        defaultCenter: [108.9290, 34.2583],
        zoom: 15,
        ctrls: [{type: 'ZOOM'}, {type: 'SCALELINE'}, {type: 'OVERVIEWMAP', collapsed: false}, {type: 'MOUSEPOSITION'}]
    });
}

function initGaodeMap(){
    DMap.Map.addGaodeMap(mapId, {
        defaultCenter: [116,40],
        zoom: 15,
        ctrls: [{type: 'ZOOM'}, {type: 'SCALELINE'}, {type: 'OVERVIEWMAP', collapsed: false}, {type: 'MOUSEPOSITION'}]
    });
}

function initGoogleMap(){
    DMap.Map.addGoogleMap(mapId, {
        defaultCenter: [116,40],
        zoom: 15,
        ctrls: [{type: 'ZOOM'}, {type: 'SCALELINE'}, {type: 'OVERVIEWMAP', collapsed: false}, {type: 'MOUSEPOSITION'}]
    });
}

function updateBaselayer(type){
    DMap.Map.updateBaselayer({
        mapId: mapId,
        type: type
    })
}

function addCirclePoint(num){
    let colors = ['#5aaba0', '#cc5b5b', '#527cdc', '#52dc69', '#d2da5d', '#b06ccc'];

    let extent = DMap.Map.getMapExtent({mapId: mapId});
    let lonDif = extent[2] - extent[0];
    let latDif = extent[3] - extent[1];
    let minLon = extent[0], minLat = extent[1];

    let repeatPoint = Math.floor(num/colors.length);
    let numArr = [];
    for(let i=0;i<=colors.length;i++){
        if(i == colors.length){
            if(num%colors.length !== 0){
                numArr[i] = num%colors.length;
            }
        }else{
            numArr[i] = repeatPoint;
        }
    }

    let arr = [];
    for(let i=0;i<numArr.length;i++){
        let pointArr = [];
        for(let j=0;j<numArr[i];j++){
            pointArr.push([minLon+Math.random()*lonDif, minLat+Math.random()*latDif]);
        }
        arr.push({
            point: pointArr,
            style:{
                radius: 3+ Math.ceil(Math.random()*15),
                strokeColor: '#2d97a5',
                strokeWidth: 1,
                fillColor: colors[Math.ceil(Math.random()*7)]
            }
        })
    }

    let layerId = 'circlePoint';
    DMap.Layer.removeLayer({
        mapId: mapId,
        layerId: layerId
    });
    DMap.Layer.CirclePoint.addLayer({
        mapId: mapId,
        layerId: layerId,
        callback: function(layerId){
            DMap.Layer.CirclePoint.setData({
                mapId: mapId,
                layerId: layerId,
                data: arr
            })
        }
    });
}

function addPolygon(num){

    let colors = ['#5aaba0', '#cc5b5b', '#527cdc', '#52dc69', '#d2da5d', '#b06ccc'];

    let extent = DMap.Map.getMapExtent({mapId: mapId}), center = DMap.Map.getMapCenter({mapId: mapId}).center;
    let lonDif = extent[2] - extent[0];
    let latDif = extent[3] - extent[1];
    let cLon = center[0], cLat = center[1];

    let xNum = Math.floor(Math.sqrt(num*3/2));
    let repeatArr = [];
    for(let i=0;i<Math.ceil(num/xNum);i++){
        if(i == Math.ceil(num/xNum)-1){
            if(num%xNum !== 0){
                repeatArr[i] = num%xNum;
            }
        }else{
            repeatArr[i] = xNum;
        }
    }
    let lonBeta = lonDif/xNum, latBeta = latDif/repeatArr.length;
    let halfRepeat = Math.floor(repeatArr.length/2);

    let arr=[];
    for(let c=0; c<colors.length; c++){
        arr.push({
            point: [[]],
            style: {
                fillColor: colors[c],
                strokeColor: '#2d97a5',
                strokeWidth: 1
            }
        })
    }
    let temp = [];
    for(let i=-halfRepeat;i<repeatArr.length-halfRepeat;i++){
        for(let j=-Math.floor(repeatArr[i+halfRepeat]/2);j<repeatArr[i+halfRepeat]-Math.floor(repeatArr[i+halfRepeat]/2);j++){
            temp = [[cLon+j*lonBeta,cLat+i*latBeta],[cLon+(j+1)*lonBeta-lonBeta*0.1,cLat+i*latBeta],
                    [cLon+(j+1)*lonBeta-lonBeta*0.1,cLat+(i+1)*latBeta-latBeta*0.1],
                    [cLon+j*lonBeta,cLat+(i+1)*latBeta-latBeta*0.1],[cLon+j*lonBeta,cLat+i*latBeta]];
                    
            arr[((i+halfRepeat)*xNum+j+Math.floor(repeatArr[i+halfRepeat]/2))%colors.length].point[0].push(temp);
        }
    }
    let layerId = 'polygon';
    DMap.Layer.removeLayer({
        mapId: mapId,
        layerId: layerId
    });
    DMap.Layer.Polygon.addLayer({
        mapId: mapId,
        layerId: layerId,
        callback: function(layerId){
            DMap.Layer.Polygon.setData({
                mapId: mapId,
                layerId: layerId,
                data:arr
            })
        }
    })
}

function addHeatmap(num){
    let extent = DMap.Map.getMapExtent({mapId: mapId});
    let lonDif = extent[2] - extent[0];
    let latDif = extent[3] - extent[1];
    let minLon = extent[0], minLat = extent[1];

    let pointArr = [];
    for(let i=0;i<num;i++){
        pointArr.push([minLon+Math.random()*lonDif, minLat+Math.random()*latDif]);
    }

    let layerId = 'heatmap';
    DMap.Layer.removeLayer({
        mapId: mapId,
        layerId: layerId
    });
    DMap.Layer.Heatmap.addLayer({
        mapId: mapId,
        layerId: layerId,
        radius: 10,
        blur: 20,
        callback: function(layerId){
            DMap.Layer.Heatmap.setData({
                mapId: mapId,
                layerId: layerId,
                data: pointArr
            })
        }
    })
}

function addMarkerPoint(num){
    let colors = ['feijichang.png', 'xiezilou.png', 'gaoerfuqiuchang.png', 'daxue.png', 'qiche.png'];

    let extent = DMap.Map.getMapExtent({mapId: mapId});
    let lonDif = extent[2] - extent[0];
    let latDif = extent[3] - extent[1];
    let minLon = extent[0], minLat = extent[1];

    let numArr = [];
    for(let i=0;i<=colors.length;i++){
        if(i == colors.length){
            if(num%colors.length !== 0){
                numArr[i] = num%colors.length;
            }
        }else{
            numArr[i] = Math.floor(num/colors.length);;
        }
    }

    let data = [];
    for(let i=0;i<numArr.length;i++){
        let pointArr = [];
        for(let j=0;j<numArr[i];j++){
            pointArr.push([minLon+Math.random()*lonDif, minLat+Math.random()*latDif]);
        }
        data.push({
            point: pointArr,
            src: '../demo/' + colors[i],
            scale: 0.7
        })
    }

    let layerId = 'markerPoint';
    DMap.Layer.removeLayer({
        mapId: mapId,
        layerId: layerId
    });
    DMap.Layer.MarkerPoint.addLayer({
        mapId: mapId,
        layerId: layerId,
        callback: function(layerId){
            DMap.Layer.MarkerPoint.setData({
                mapId: mapId,
                layerId: layerId,
                data: data
            })
        }
    })
}


function addLine(num){
    let colors = ['#5aaba0', '#cc5b5b', '#527cdc', '#52dc69', '#d2da5d', '#b06ccc'];

    let center = DMap.Map.getMapCenter({mapId: mapId}).center, extent = DMap.Map.getMapExtent({mapId: mapId});
    let lonBeta = extent[2] - extent[0];
    let cLon = center[0], cLat = center[1];

    let data = [], radius = lonBeta*0.1;
    for(let j=0;j<num;j++){
        if(j%360 === 0){
            cLon = center[0];
            cLon += Math.floor(j/360)*lonBeta*0.25;
        }
        tempAngle = j/180*Math.PI;
        data.push({
            point: [[cLon,cLat], [cLon + Math.cos(tempAngle)*radius, cLat + Math.sin(tempAngle)*radius]],
            style: {
                color: colors[j%colors.length],
                arrow: true,
                width: 2
            }
        })
    }

    let layerId = 'lineArrow';
    DMap.Layer.removeLayer({
        mapId: mapId,
        layerId: layerId
    });
    DMap.Layer.Line.addLayer({
        mapId: mapId,
        layerId: layerId,
        callback: function(layerId){
            DMap.Layer.Line.setData({
                mapId: mapId,
                layerId: layerId,
                data: data
            })
        }
    })
}

function addTrack(num){
    let colors = ['feijichang.png', 'xiezilou.png', 'gaoerfuqiuchang.png', 'daxue.png', 'qiche.png'];

    let layerId = 'trackLine';
    DMap.Layer.removeLayer({
        mapId: mapId,
        layerId: layerId
    });
    DMap.Layer.Track.addLayer({
        mapId: mapId,
        layerId: layerId,
        callback: function(layerId){
            DMap.Layer.Track.setData({
                mapId: mapId,
                layerId: layerId,
                data: stationData
            })
        }
    })
}

function startTrack(){
    let index = Number($('#trackOption').val()) - 1;
    DMap.Layer.Track.start({
        mapId: mapId,
        layerId: 'trackLine',
        id: stationData[index].id
    })
}

function stopTrack(){
    let index = Number($('#trackOption').val()) - 1;
    DMap.Layer.Track.stop({
        mapId: mapId,
        layerId: 'trackLine',
        id: stationData[index].id
    })
}

function clearData(layerId){
    DMap.Layer.removeLayer({
        mapId: mapId,
        layerId: layerId
    });
}

var util = {
    measDis: { id: 'measureDis', status: false },
    measAng: { id: 'measureAng', status: false },
    measArea: { id: 'measureArea', status: false },
    drawLine: { id: 'drawLine', status: false },
    drawPoint: { id: 'drawPoint', status: false},
    drawCircle: { id: 'drawCircle', status: false },
    drawPolygon: { id: 'drawPolygon', status: false },
    drawRectangle: { id: 'drawRectangle', status: false }
}

function measureDistance(){
    let param = {mapId: mapId, utilId: util.measDis.id};

    if(!DMap.MapUtil.isUtilExist(param)){

        DMap.MapUtil.openMeasureDistance({
            mapId: mapId,
            utilId: util.measDis.id,
            active: true,
            callback: function(param){
                console.log('measure distance', param);
            }
        })
    } else {
        if(DMap.MapUtil.isActive(param)){
            DMap.MapUtil.removeUtil(param);
        }else{
            util.measDis.id = 'measureDis' + Math.ceil(Math.random()*1000);
            DMap.MapUtil.openMeasureDistance({
                mapId: mapId,
                utilId: util.measDis.id,
                active: true,
                callback: function(param){
                    console.log('measure distance', param);
                }
            })
        } 
    }
}

function measureAngle(){
    let param = {mapId: mapId, utilId: util.measAng.id};

    if(!DMap.MapUtil.isUtilExist(param)){

        DMap.MapUtil.openMeasureAngle({
            mapId: mapId,
            active: true,
            utilId: param.utilId,
            callback: function(param){
                console.log('measure angle', param);
            }
        })
    } else {
        if(DMap.MapUtil.isActive(param)){
            DMap.MapUtil.removeUtil(param);
        }else{
            util.measAng.id = 'measureAng' + Math.ceil(Math.random()*1000);
            DMap.MapUtil.openMeasureAngle({
                mapId: mapId,
                active: true,
                utilId: util.measAng.id,
                callback: function(param){
                    console.log('measure angle', param);
                }
            })
        } 
    }
}

function measureArea(){
    let param = {mapId: mapId, utilId: util.measArea.id};

    if(!DMap.MapUtil.isUtilExist(param)){

        DMap.MapUtil.openMeasureArea({
            mapId: mapId,
            active: true,
            utilId: util.measArea.id,
            callback: function(param){
                console.log('measure area', param);
            }
        })
    } else {
        if(DMap.MapUtil.isActive(param)){
            DMap.MapUtil.removeUtil(param);
        }else{
            util.measArea.id = 'measureArea' + Math.ceil(Math.random()*1000);
            DMap.MapUtil.openMeasureArea({
                mapId: mapId,
                active: true,
                utilId: util.measArea.id,
                callback: function(param){
                    console.log('measure area', param);
                }
            })
        } 
    }
}

function drawPoint(){
    let param = {mapId: mapId, utilId: util.drawPoint.id};

    if(!DMap.MapUtil.isUtilExist(param)){
        DMap.MapUtil.drawPoint({
            mapId: mapId,
            active: true,
            utilId: param.utilId,
            callback: function(param){
                console.log(param);
            }
        })
    } else {
        if(DMap.MapUtil.isActive(param)){
            DMap.MapUtil.removeUtil(param);
        }else{
            util.drawPoint.id = 'drawPoint' + Math.ceil(Math.random()*1000);
            DMap.MapUtil.drawPoint({
                mapId: mapId,
                active: true,
                utilId: util.drawPoint.id,
                callback: function(param){
                    console.log(param);
                }
            })
        }
    }
}

function drawLine(){
    let param = {mapId: mapId, utilId: util.drawLine.id};

    if(!DMap.MapUtil.isUtilExist(param)){
        DMap.MapUtil.drawLine({
            mapId: mapId,
            active: true,
            utilId: util.drawLine.id,
            callback: function(param){
                console.log(param);
            }
        })
    } else {
        if(DMap.MapUtil.isActive(param)){
            DMap.MapUtil.removeUtil(param);
        }else{
            util.drawLine.id = 'drawLine' + Math.ceil(Math.random()*1000);
            DMap.MapUtil.drawLine({
                mapId: mapId,
                active: true,
                utilId: util.drawLine.id,
                callback: function(param){
                    console.log(param);
                }
            })
        }
    }
}

function drawCircle(){
    let param = {mapId: mapId, utilId: util.drawCircle.id};

    if(!DMap.MapUtil.isUtilExist(param)){
        DMap.MapUtil.drawCircle({
            mapId: mapId,
            active: true,
            utilId: util.drawCircle.id,
            callback: function(param){
                console.log('draw circle', param);
            }
        })
    } else {
        if(DMap.MapUtil.isActive(param)){
            DMap.MapUtil.removeUtil(param);
        }else{
            util.drawCircle.id = 'drawCircle' + Math.ceil(Math.random()*1000);
            DMap.MapUtil.drawCircle({
                mapId: mapId,
                active: true,
                utilId: util.drawCircle.id,
                callback: function(param){
                    console.log('draw circle', param);
                }
            })
        }
    }
}

function drawPolygon(){
    let param = {mapId: mapId, utilId: util.drawPolygon.id};

    if(!DMap.MapUtil.isUtilExist(param)){
        DMap.MapUtil.drawPolygon({
            mapId: mapId,
            active: true,
            utilId: util.drawPolygon.id,
            callback: function(param){
                console.log('draw polygon', param);
            }
        })
    } else {
        if(DMap.MapUtil.isActive(param)){
            DMap.MapUtil.removeUtil(param);
        }else{
            util.drawPolygon.id = 'drawPolygon' + Math.ceil(Math.random()*1000);
            DMap.MapUtil.drawPolygon({
                mapId: mapId,
                active: true,
                utilId: util.drawPolygon.id,
                callback: function(param){
                    console.log('draw polygon', param);
                }
            })
        }
    }
}

function drawRectangle(){
    let param = {mapId: mapId, utilId: util.drawRectangle.id};

    if(!DMap.MapUtil.isUtilExist(param)){
        DMap.MapUtil.drawRectangle({
            mapId: mapId,
            active: true,
            utilId: util.drawRectangle.id,
            callback: function(param){
                console.log('draw rectangle', param);
            }
        })
    } else {
        if(DMap.MapUtil.isActive(param)){
            DMap.MapUtil.removeUtil(param);
        }else{
            util.drawRectangle.id = 'drawRectangle' + Math.ceil(Math.random()*1000);
            DMap.MapUtil.drawRectangle({
                mapId: mapId,
                active: true,
                utilId: util.drawRectangle.id,
                callback: function(param){
                    console.log('draw rectangle', param);
                }
            })
        }
    }
}

function changeMapColor(){
    let isShow = ($('.sliderContainer')[0].style.display === 'none'  || $('.sliderContainer')[0].style.display === '') ?false:true;
    if(isShow){
        $('.sliderContainer').hide();
        return;
    }else{
        $('.sliderContainer').show();
    }
    
    for(var i=1;i<10;i++){
        $("#slider"+i).slider({
            max: 200,
            min: 0,
            value: 0,
            change: function(event, ui){
                var id = event.target.id.substr(event.target.id.length-1, 1);
                $('#input' + id).val(Number(ui.value)/100);
                let list = getParaList();
                var options = {
                    mapId: mapId,
                    param: list
                }
                DMap.Map.colorMap(options);
            }
        });
    }
}

function getParaList(){
    let list = [[],[],[]];
    for(var i=0;i<3;i++){
        list[i].push(Number($('#input'+(i*3+1)).val()));
        list[i].push(Number($('#input'+(i*3+2)).val()));
        list[i].push(Number($('#input'+(i*3+3)).val()));
    }
    return list;
}

function changeColor(commonColor){
    let list;
    if(commonColor){
        if(commonColor === 'default'){
            list = null;
        }else if(commonColor === 'same'){
            list = [[0.38, 0.19, 0.28],[0.15, 0.19,0.19],[0.17, 0.15, 0.16]];
        }else{
            list = commonColor;
        }
    }else{
        list = getParaList();
        $( this.event.target.previousSibling ).slider( "option", "value", Number(this.event.target.value)*100 )
    }
    var options = {
        mapId: mapId,
        param: list
    }
    DMap.Map.colorMap(options);
}

function switchSat(def){
    if(def){
        DMap.Map.switchRoad({mapId: mapId});
        constData.maptype = '';
    }else{
        DMap.Map.switchSatellite({mapId: mapId});
        constData.maptype = 'sat';
    }
}